{% extends 'base.html' %}

{% block page_title %}
  Event & Activities | Wisata Nusantara
{% endblock %}

{% block content %}

<body>
  <div class="h-screen bg-gradient-to-r from-green-500 to-slate-500">
    <p class="text-center text-4xl font-bold py-5 ">Events</p>
    
    <div class="flex justify-center">
      <select id="filter-category" class=" filter border border-gray-300 rounded-full text-gray-600 h-10 pl-5 pr-10 bg-white hover:border-gray-400 focus:outline-none appearance-none">
        <option>Choose a category</option>
        <option>All</option>
        <option>Musik</option>
        <option>Olahraga</option>
        <option>Budaya</option>
        <option>Lainnya</option>
      </select>
      <button onclick="showCat()" class=" ml-2 inline-flex items-center  py-2 px-3 text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Apply</button>
    </div>

  <div class="flex justify-center justify-items-center bg-gradient-to-r from-green-500 to-slate-500 h-fit mt-4 p-4">
    <div id="container" class="grid grid-cols-4 gap-4">
    </div>
  </div>

  <div class="flex justify-center justify-items-center bg-gradient-to-r from-green-500 to-slate-500 h-fit p-4">
    {% if user_loggedin %}
      <a href="{% url 'daftar_event:tambah-event' %}"class="bg-gray-900 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-full">Add New Event</a>
    {% endif %}
  </div>
  </div>
</div>
  

  
</body>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
  $(document).ready(function () {
    let tab= "";
    $.ajax({
        url: "{% url 'daftar_event:show_json' %}",
        type: "GET",
        dataType: "json",
        success: function(resp){  
            for (let i of resp){
                tab +=`
                <div class="bg-white rounded-2xl mt-64 p-2 grid grid-cols-2 gap-2 md:grid-cols-4">
                  <h5 class="font-semibold text-gray-900 text-xl leading-tight mb-2">${i.fields.nama}</h5>
                  <p class="text-gray-700 text-base mb-4">${i.fields.lokasi}</p>
                  <a><button type="button" class=" inline-block px-6 py-2.5 bg-gray-900 text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out">Read more</button</a>>
                  </div>`;
              $('#container').html(tab);
            }
        },
        error: function(resp){
            console.log('Error?');
        }
    });
  });

  function showCat(){
    let tab= "";
    let e = document.getElementById("filter-category");
    var text = e.options[e.selectedIndex].text;
    $.ajax({
        url: `/daftar-event/show/${text}`,
        type: "GET",
        dataType: "json",
        success: function(resp){  
          console.log(123123)
          for (let i of resp){
            tab +=`
            <div class="bg-white rounded-2xl p-8 shadow-xl flex flex-col gap-2 max-w-[300px]">
              <a href="#">
                <img class="rounded-t-lg" src="https://thumbs.dreamstime.com/b/pink-cosmos-flowe-flowerbackground-112007426.jpg" alt="" />
              </a>
              <p class="text-center text-xl font-semibold">${i.fields.nama}</p>
              <p class="text-center text-xs">${i.fields.lokasi}</p>
              <a href="/daftar-event/event/${i.pk}" class="inline-flex items-center py-2 px-3 text-sm font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
                Read more
                <svg aria-hidden="true" class="ml-2 -mr-1 w-4 h-4" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
              </a>
              <a href="/daftar-event/delete-task/${i.pk}"><button class=" ml-2 inline-flex items-center  py-2 px-3 text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Delete</button></a>
              </div>`
            ;
            $('#container').html(tab);
          }
        },
        error: function(resp){
            console.log('Error?');
        }
    });
  };
</script>
{% endblock %}

